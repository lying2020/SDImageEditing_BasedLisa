# SmartFreeEdit æŒ‡ä»¤ç¼–å†™æŒ‡å—

## ğŸ“¸ ç¤ºä¾‹å›¾ç‰‡åˆ†æ

### å›¾ç‰‡ä¿¡æ¯
- **è·¯å¾„**: `/home/liying/Desktop/IMAGE_EDITE-CVPR-2025/images/ReasonEdit/6-Reasoning/009.png`
- **å°ºå¯¸**: 1024x679
- **ç±»å‹**: æ¨ç†ç±»å‹ï¼ˆReasoningï¼‰ç¼–è¾‘ä»»åŠ¡

### å®˜æ–¹æŒ‡ä»¤ç¤ºä¾‹

å¯¹äº `009.png`ï¼ŒReasonEdit åŸºå‡†æµ‹è¯•ä½¿ç”¨çš„æŒ‡ä»¤æ˜¯ï¼š

```
What is the food that makes people feel spicy or hot? Please replace this food with an orange.
```

**æŒ‡ä»¤è§£æ**ï¼š
- è¿™æ˜¯ä¸€ä¸ª**æ¨ç†ç±»å‹**çš„æŒ‡ä»¤
- éœ€è¦ç†è§£"è®©äººæ„Ÿè§‰è¾£æˆ–çƒ­çš„é£Ÿç‰©"æ˜¯ä»€ä¹ˆï¼ˆå¯èƒ½æ˜¯è¾£æ¤’ã€èƒ¡æ¤’ç­‰ï¼‰
- ç„¶åå°†è¯¥é£Ÿç‰©æ›¿æ¢æˆæ©™å­

---

## ğŸ¯ æŒ‡ä»¤ç¼–å†™åŸåˆ™

### 1. æŒ‡ä»¤ç±»å‹åˆ†ç±»

æ ¹æ® SmartFreeEdit çš„åˆ†ç±»ç³»ç»Ÿï¼ŒæŒ‡ä»¤å¯ä»¥åˆ†ä¸ºï¼š

| ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **Addition** | æ·»åŠ æ–°å¯¹è±¡ | "add a bird", "add a car in the background" |
| **Remove** | åˆ é™¤å¯¹è±¡ | "remove the car", "remove the person" |
| **Local** | æ›¿æ¢å±€éƒ¨å¯¹è±¡æˆ–æ”¹å˜å±æ€§ | "change the cat to a dog", "make it smile", "replace the red apple with a green apple" |
| **Global** | ç¼–è¾‘æ•´ä¸ªå›¾åƒ | "let's see it in winter", "Change the season from autumn to spring" |
| **Background** | æ”¹å˜èƒŒæ™¯ | "change the background to a beach", "make the hedgehog in France" |
| **Resize** | è°ƒæ•´å¯¹è±¡å¤§å° | "minify the giraffe in the image", "make the car bigger" |

### 2. æ›¿æ¢ç±»æŒ‡ä»¤ï¼ˆLocalç±»å‹ï¼‰

å¯¹äº"æŠŠé’è¾£æ¤’æ¢æˆèƒ¡èåœ"è¿™ç±»æ›¿æ¢æŒ‡ä»¤ï¼Œæ¨èå†™æ³•ï¼š

#### âœ… æ¨èå†™æ³•

```
replace the green pepper with a carrot
```

æˆ–è€…æ›´è¯¦ç»†ï¼š

```
replace the green pepper with a carrot, keeping the same position and size
```

#### âœ… å…¶ä»–æ›¿æ¢æŒ‡ä»¤ç¤ºä¾‹

```
replace the apple with an orange
change the red car to a blue car
swap the dog with a cat
substitute the green pepper for a carrot
```

#### âš ï¸ ä¸æ¨èå†™æ³•

```
æŠŠé’è¾£æ¤’æ¢æˆèƒ¡èåœ  # ä¸­æ–‡æŒ‡ä»¤ï¼ˆå¦‚æœAPIä¸æ”¯æŒä¸­æ–‡ï¼‰
green pepper -> carrot  # ç¬¦å·è¡¨ç¤ºä¸å¤Ÿæ¸…æ™°
```

---

## ğŸ“ é’ˆå¯¹ 009.png çš„æŒ‡ä»¤å»ºè®®

### åŸå§‹æŒ‡ä»¤ï¼ˆå®˜æ–¹ï¼‰
```
What is the food that makes people feel spicy or hot? Please replace this food with an orange.
```

### ä½ çš„æŒ‡ä»¤ï¼ˆ"æŠŠé’è¾£æ¤’æ¢æˆèƒ¡èåœ"ï¼‰

#### æ–¹å¼1ï¼šç›´æ¥æ›¿æ¢ï¼ˆæ¨èï¼‰
```
replace the green pepper with a carrot
```

#### æ–¹å¼2ï¼šæ¨ç†å¼æ›¿æ¢ï¼ˆç±»ä¼¼å®˜æ–¹é£æ ¼ï¼‰
```
What is the green spicy vegetable? Please replace it with a carrot.
```

#### æ–¹å¼3ï¼šè¯¦ç»†æè¿°
```
replace the green pepper (the spicy vegetable) with a fresh orange carrot, keeping the same position
```

---

## ğŸ¨ æŒ‡ä»¤ç¼–å†™æŠ€å·§

### 1. æ˜ç¡®æŒ‡å®šå¯¹è±¡

âœ… **å¥½**ï¼š
- "replace the **green pepper** with a carrot"
- "change the **red car** to a blue car"
- "remove the **person in the foreground**"

âŒ **æ¨¡ç³Š**ï¼š
- "replace it with a carrot" ï¼ˆ"it"æŒ‡ä»£ä¸æ¸…ï¼‰
- "change the thing" ï¼ˆ"thing"å¤ªæ¨¡ç³Šï¼‰

### 2. ä½¿ç”¨åŠ¨ä½œè¯

| åŠ¨ä½œè¯ | é€‚ç”¨åœºæ™¯ | ç¤ºä¾‹ |
|--------|---------|------|
| replace | æ›¿æ¢å¯¹è±¡ | "replace A with B" |
| change | æ”¹å˜å±æ€§æˆ–å¯¹è±¡ | "change the color to red" |
| remove | åˆ é™¤å¯¹è±¡ | "remove the car" |
| add | æ·»åŠ å¯¹è±¡ | "add a bird in the sky" |
| make | æ”¹å˜çŠ¶æ€ | "make it smile", "make the sky blue" |
| swap | äº¤æ¢å¯¹è±¡ | "swap the dog with a cat" |

### 3. æä¾›ä¸Šä¸‹æ–‡ï¼ˆå¯é€‰ï¼‰

å¯¹äºå¤æ‚åœºæ™¯ï¼Œå¯ä»¥æä¾›æ›´å¤šä¸Šä¸‹æ–‡ï¼š

```
In the vegetable basket, replace the green pepper with a fresh orange carrot.
```

### 4. æŒ‡å®šä½ç½®ï¼ˆå¦‚æœéœ€è¦ï¼‰

```
replace the green pepper on the left with a carrot
replace the green pepper in the foreground with a carrot
```

---

## ğŸ” æ¨ç†ç±»å‹æŒ‡ä»¤ï¼ˆReasoningï¼‰

å¯¹äºéœ€è¦æ¨ç†çš„æŒ‡ä»¤ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ¨¡å¼ï¼š

### æ¨¡å¼1ï¼šé—®é¢˜+æŒ‡ä»¤
```
What is [æè¿°]? Please replace it with [ç›®æ ‡å¯¹è±¡].
```

ç¤ºä¾‹ï¼š
- "What is the food that makes people feel spicy? Please replace it with an orange."
- "What is the red fruit? Please replace it with an apple."

### æ¨¡å¼2ï¼šæ¡ä»¶+æŒ‡ä»¤
```
If there is [æ¡ä»¶å¯¹è±¡], replace it with [ç›®æ ‡å¯¹è±¡].
```

ç¤ºä¾‹ï¼š
- "If there is a green pepper, replace it with a carrot."
- "If you see a red car, change it to blue."

### æ¨¡å¼3ï¼šæè¿°+æ›¿æ¢
```
Find the [æè¿°æ€§ç‰¹å¾] and replace it with [ç›®æ ‡å¯¹è±¡].
```

ç¤ºä¾‹ï¼š
- "Find the spicy vegetable and replace it with a carrot."
- "Find the red object and replace it with a blue one."

---

## ğŸ’¡ å®é™…ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šç®€å•æ›¿æ¢
```python
prompt = "replace the green pepper with a carrot"
```

### ç¤ºä¾‹2ï¼šæ¨ç†æ›¿æ¢
```python
prompt = "What is the green spicy vegetable? Please replace it with a carrot."
```

### ç¤ºä¾‹3ï¼šå®Œæ•´æµæ°´çº¿ä½¿ç”¨
```python
from test_demo_batch import load_models, full_pipeline_inference

# åŠ è½½æ¨¡å‹
pipe, groundingdino_model, lisa_model, tokenizer, device = load_models()

# æ‰§è¡Œç¼–è¾‘
full_pipeline_inference(
    pipe=pipe,
    groundingdino_model=groundingdino_model,
    lisa_model=lisa_model,
    tokenizer=tokenizer,
    device=device,
    input_image_path="/home/liying/Desktop/IMAGE_EDITE-CVPR-2025/images/ReasonEdit/6-Reasoning/009.png",
    prompt="replace the green pepper with a carrot",  # ä½ çš„æŒ‡ä»¤
    output_path="output_009_carrot.png",
    api_key="your_api_key",
    api_version="2024-08-01-preview",
    end_point="https://your-endpoint.openai.azure.com/",
    engine="4o"
)
```

---

## ğŸ“‹ æŒ‡ä»¤æ¨¡æ¿åº“

### æ›¿æ¢ç±»ï¼ˆLocalï¼‰
```
replace [åŸå¯¹è±¡] with [æ–°å¯¹è±¡]
change [åŸå¯¹è±¡] to [æ–°å¯¹è±¡]
swap [å¯¹è±¡1] with [å¯¹è±¡2]
substitute [åŸå¯¹è±¡] for [æ–°å¯¹è±¡]
```

### åˆ é™¤ç±»ï¼ˆRemoveï¼‰
```
remove [å¯¹è±¡]
delete [å¯¹è±¡]
take away [å¯¹è±¡]
erase [å¯¹è±¡]
```

### æ·»åŠ ç±»ï¼ˆAdditionï¼‰
```
add [å¯¹è±¡]
insert [å¯¹è±¡]
place [å¯¹è±¡] in [ä½ç½®]
put [å¯¹è±¡] on [ä½ç½®]
```

### å±æ€§ä¿®æ”¹ç±»ï¼ˆLocalï¼‰
```
make [å¯¹è±¡] [å±æ€§]
change [å¯¹è±¡] to [é¢œè‰²/çŠ¶æ€]
turn [å¯¹è±¡] into [æ–°çŠ¶æ€]
```

### èƒŒæ™¯ç±»ï¼ˆBackgroundï¼‰
```
change the background to [åœºæ™¯]
replace the background with [åœºæ™¯]
make the background [æè¿°]
```

### å…¨å±€ç±»ï¼ˆGlobalï¼‰
```
make it [å­£èŠ‚/å¤©æ°”]
change the scene to [åœºæ™¯]
transform the image to [çŠ¶æ€]
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ä½¿ç”¨è‹±æ–‡æŒ‡ä»¤**ï¼šGPT-4o API å¯¹è‹±æ–‡æŒ‡ä»¤ç†è§£æ›´å¥½
2. **é¿å…æ­§ä¹‰**ï¼šæ˜ç¡®æŒ‡å®šè¦ç¼–è¾‘çš„å¯¹è±¡
3. **ç®€æ´æ˜äº†**ï¼šè¿‡é•¿çš„æŒ‡ä»¤å¯èƒ½å½±å“ç†è§£
4. **æµ‹è¯•éªŒè¯**ï¼šä¸åŒæŒ‡ä»¤å¯èƒ½éœ€è¦è°ƒæ•´å‚æ•°

---

## ğŸ¯ é’ˆå¯¹ä½ çš„éœ€æ±‚æ€»ç»“

**ä½ çš„éœ€æ±‚**ï¼š"æˆ‘æƒ³æŠŠé’è¾£æ¤’æ¢æˆèƒ¡èåœ"

**æ¨èæŒ‡ä»¤**ï¼š
```
replace the green pepper with a carrot
```

**å®Œæ•´ä»£ç ç¤ºä¾‹**ï¼š
```python
prompt = "replace the green pepper with a carrot"
```

è¿™ä¸ªæŒ‡ä»¤ä¼šè¢«åˆ†ç±»ä¸º **Local** ç±»å‹ï¼Œç³»ç»Ÿä¼šï¼š
1. è¯†åˆ«å›¾ç‰‡ä¸­çš„é’è¾£æ¤’
2. ç”Ÿæˆå¯¹åº”çš„ mask
3. å°†é’è¾£æ¤’æ›¿æ¢ä¸ºèƒ¡èåœ

---

**æœ€åæ›´æ–°**ï¼š2025å¹´
